<!doctype html>
<link rel="import" href="../../polymer/polymer.html">
<link rel="import" href="../can-api/can-api.html">
<link rel="import" href="../can-form/can-form.html">
<link rel="import" href="../can-textinput/can-textinput.html">
<link rel="import" href="../can-selectbox/can-selectbox.html">
<link rel="import" href="../can-country-selectbox/can-country-selectbox.html">

<dom-module id="can-user-profile-form">
    <template>

        <can-api
            auth
            route="[[APIRoute]]"
            method="GET"
            auto="[[userId]]"
            last-response="{{data}}"
        ></can-api>

        <can-form
            auth
            disabled$="[[disabled]]"
            valid="{{valid}}"
            formdata="{{data}}"
            submitlabel="Opslaan"
            hidesubmitbutton="[[readonly]]"
            apipath="[[APIRoute]]"
            method="PUT"
            hide-warning="[[readonly]]"
            on-response="_saveSuccess"
            on-error="_saveFailed"
            >

            <template is="dom-if" if="[[ondernemer]]">

                <can-textinput
                    required="false"
                    name="name"
                    value="{{data.name}}"
                    placeholder="bedrijfsnaam"
                    description="Dit is de officiÃ«le naam van je bedrijf zoals deze staat ingeschreven bij de Kamer van Koophandel."
                ></can-textinput>

                <can-selectbox
                    required="false"
                    name="businessEntity"
                    value="{{data.businessEntity}}"
                    placeholder="rechtsvorm"
                    options="{{businessEntities}}">
                </can-selectbox>

            </template>

            <template is="dom-if" if="[[isStocksCampaign]]">

                <can-textinput
                    required="false"
                    name="stakName"
                    value="{{data.stakName}}"
                    placeholder="Naam stichting sdministratiekantoor (STAK)"
                    description="Dit is de naam van de stak voor de aandelen."
                ></can-textinput>

            </template>

            <template is="dom-if" if="[[investor]]">

                <can-textinput
                    required="true"
                    name="firstName"
                    value="{{data.firstName}}"
                    placeholder="voornaam (of bedrijfsnaam)"
                ></can-textinput>

                <can-textinput
                    required="true"
                    name="lastName"
                    value="{{data.lastName}}"
                    placeholder="achternaam (of rechtsvorm)"
                ></can-textinput>

            </template>

            <can-textinput
                required="true"
                name="street"
                value="{{data.address.street}}"
                placeholder="straat"
                description="Dit is het adres waarmee je bedrijf staat ingeschreven bij de Kamer van Koophandel. Let op: dit komt niet altijd overeen met het bezoekadres van je bedrijf."
            ></can-textinput>

            <can-textinput
                required="true"
                name="houseNumber"
                value="{{data.address.houseNumber}}"
                placeholder="huisnummer"
                pattern="^([0-9]+).*$"
            ></can-textinput>

            <can-textinput
                required="true"
                name="postalCode"
                value="{{data.address.postalCode}}"
                placeholder="postcode"
            ></can-textinput>

            <can-textinput
                required="true"
                name="city"
                value="{{data.address.city}}"
                placeholder="woonplaats"
            ></can-textinput>

            <can-textinput
                required="true"
                name="region"
                value="{{data.address.region}}"
                placeholder="provincie"
            ></can-textinput>

            <can-country-selectbox
                required
                name="country"
                value="{{data.address.country}}"
                placeholder="land"
            ></can-country-selectbox>

            <template is="dom-if" if="[[ondernemer]]">

                <can-textinput
                    name="KVKNumber"
                    value="{{data.KVKNumber}}"
                    placeholder="kvk nummer"
                    pattern="^[0-9]{8}$">
                </can-textinput>

                <can-textinput
                    name="IBAN"
                    value="{{data.IBAN}}"
                    placeholder="IBAN"
                    pattern="^[A-Z]{2}[0-9]{2}[A-Z]{4}[0-9]{10}$">
                </can-textinput>

            </template>

        </can-form>

    </template>
    <script src="can-user-profile-form.js"></script>
</dom-module>
