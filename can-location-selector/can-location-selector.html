<link rel="import" href="../../../bower_components/polymer/polymer.html">
<link rel="import" href="../../../bower_components/google-map/google-map.html">
<link rel="import" href="../../../bower_components/google-map/google-map-marker.html">
<link rel="import" href="../../../bower_components/google-map/google-map-search.html">
<link rel="import" href="../can-list/can-list.html">
<link rel="import" href="../can-list-item/can-list-item.html">


<dom-module id="can-location-selector">

    <template>
        
        <can-textinput
          id="searchMapsString"
        ></can-textinput>
        <can-button on-button-tap="_searchGoogleMaps">zoek</can-button>
        <p>Huidige selectie: [[formattedAddress]]: [[geocode.lat]] - [[geocode.lng]]</p>
        <google-map-search 
            id="searchselector"
            map="[[map]]"
            query="[[searchMapsString]]"
            results="{{results}}"
            fit-to-markers="true">     
        </google-map-search>
        <google-map 
            map="{{map}}" 
            latitude="{{geocode.lat}}"
            longitude="{{geocode.lng}}" 
            api-key="AIzaSyB-DfqazxVFeBB-xvRmJuidsIrQJIfvLeU">
        <template is="dom-repeat" items="{{results}}" as="marker">
          <google-map-marker 
                latitude="{{marker.latitude}}"
                longitude="{{marker.longitude}}">
                  <h4>{{marker.name}}</h4>
                  <span>{{marker.formatted_address}}<can-button>Kies</can-button></span>    
          </google-map-marker>
        </template>
        </google-map>

          <can-list>
              <template is="dom-repeat" items="[[results]]" as="marker">
                  <can-list-item on-tap="_focusOnMarker">
                      <header>
                          <h3>[[marker.name]]</h3>
                      </header>
                      <article>
                          <h3>[[marker.formatted_address]]</h3>
                          <p>[[marker.latitude]] - [[marker.longitude]]</p>
                      </article>
                </can-list-item>
              </template>
          </can-list>
    </template>
  <script src="can-location-selector.js" charset="utf-8"></script>
</dom-module>
